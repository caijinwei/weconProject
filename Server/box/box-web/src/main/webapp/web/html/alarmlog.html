<!DOCTYPE html>
<html lang="en" ng-app="weconweb">
<head>
<meta charset="UTF-8">
<title>Title</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="../css/style.css" />
<link rel="stylesheet"
	href="../lib/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet"
	href="../lib/font-awesome/4.7.0/css/font-awesome.min.css">

<link href="../css/page.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet"
	href="../lib/bootstrap/datetimepicker/css/bootstrap-datetimepicker.min.css">


</head>
<body ng-controller="infoController" ng-init="onInit()"
	style="margin-top: 20px;">
	<ol class="breadcrumb">
		<li><a href="overview.html">主页</a></li>
		<li class="active">{{devicename}}</li>
	</ol>
	<ul class="nav nav-pills nav-justified" role="tablist"
		style="margin-top: 20px;">
		<li><a
			href="datamonitor.html?device_id={{deviceid}}&device_name={{devicename}}">数据监控</a></li>
		<li class="active"><a
			href="alarmlog.html?device_id={{deviceid}}&device_name={{devicename}}">报警记录</a></li>
		<li><a
			href="historydata.html?device_id={{deviceid}}&device_name={{devicename}}">历史数据</a></li>
		<li ng-if="accounttype==1 && deviceid>0"><a
			href="remotedownload.html?device_id={{deviceid}}&device_name={{devicename}}">远程下载</a></li>
		<li ng-if="accounttype==1 && deviceid>0"><a
			href="baseconfig.html?device_id={{deviceid}}&device_name={{devicename}}">基本配置</a></li>
	</ul>
	<div class="container-fluid">
		<ul class="nav nav-tabs" role="tablist" id="alarmtab"
			style="margin-top: 40px;">
			<li class="active"><a href="#current-alarm" data-toggle="tab"
				ng-click="alarm_submit(paginationConf_current.currentPage,paginationConf_current.itemsPerPage)">当前报警</a></li>
			<li><a href="#history-alarm" data-toggle="tab"
				ng-click="hisalarm_submit(paginationConf_history.currentPage,paginationConf_history.itemsPerPage)">历史报警</a></li>
			<li><a href="#alarm-record" data-toggle="tab">报警登记</a></li>
			<li><a href="#alarm-global-setting" data-toggle="tab">全局设置</a></li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="current-alarm">
				<div class="container-fluid">
					<table class="table table-bordered" style="margin-top: 20px;">
						<thead>
							<tr>
								<th class="col-md-1">编码</th>
								<th class="col-md-1">名称</th>
								<th class="col-md-3">信息</th>
								<th class="col-md-1">状态</th>
								<th class="col-md-2">值</th>
								<th class="col-md-3">时间</th>
								<th class="col-md-2">操作</th>

							</tr>
						</thead>
						<tbody>
							<tr style="color: red" ng-repeat="x in alarmDatas">
								<td>{{x.alarm_cfg_id}}</td>
								<td>{{x.name}}</td>
								<td>{{x.text}}</td>
								<td>{{x.state==0?"确认":"未确认"}}</td>
								<td>{{x.value}}</td>
								<td>{{x.monitor_time|date:'yyyy-MM-dd HH:mm:ss'}}</td>
								<td><a href="#" title="详情"><span
										class="glyphicon glyphicon-info-sign"></span></a> <a href="#"
									title="确认"><span class="glyphicon glyphicon-ok"
										style="margin-left: 5px;"></span></a></td>
							</tr>
						</tbody>
					</table>
					<tm-pagination conf="paginationConf_current"></tm-pagination>
				</div>
			</div>
			<div class="modal fade" id="loadingModal" tabindex="-1" role="dialog"
				aria-labelledby="mySmallModalLabel">
				<div class="modal-dialog modal-sm" role="document"
					style="margin-top: 350px; text-align: center">
					<img src="../image/loading.jpg" />
				</div>
			</div>
			<div class="tab-pane" id="history-alarm">
				<div class="container-fluid" style="margin-top: 20px;">
					<div class="row">
						<span class="col-md-1" style="height: 30px; line-height: 30px;">编码</span>
						<input id="alarmcfgid" class="col-md-3" type="text"
							style="padding-left: 5px; height: 35px;" /> <span
							class="col-md-1"
							style="height: 30px; line-height: 30px; margin-left: 30px">名称</span>
						<input id="alarmcfgname" class="col-md-3" type="text"
							style="padding-left: 5px; height: 35px;" />
					</div>
					<div class="row" style="margin-top: 20px;">
						<div style="display: inline-block; margin-left: -15px;"
							class="col-md-4">
							<span class="col-md-3" style="height: 30px; line-height: 30px;">起始日期</span>
							<div class="input-group date form_datetime col-md-9"
								data-date="1979-09-16T05:25:07Z"
								data-date-format="yyyy-mm-dd hh:ii">
								<input id="startdateid" class="form-control" size="16"
									type="text" value="" readonly> <span
									class="input-group-addon"><span
									class="glyphicon glyphicon-remove"></span></span> <span
									class="input-group-addon"><span
									class="glyphicon glyphicon-calendar"></span></span>
							</div>
						</div>
						<div
							style="float: left; display: inline-block; margin-left: 35px;"
							class="col-md-4">
							<span class="col-md-3" style="height: 30px; line-height: 30px;">结束日期</span>
							<div class="input-group date form_datetime col-md-9"
								data-date="1979-09-16T05:25:07Z"
								data-date-format="yyyy-mm-dd hh:ii">
								<input id="enddateid" class="form-control" size="16" type="text"
									value="" readonly> <span class="input-group-addon"><span
									class="glyphicon glyphicon-remove"></span></span> <span
									class="input-group-addon"><span
									class="glyphicon glyphicon-calendar"></span></span>
							</div>
						</div>
						<button type="button" class="btn btn-primary"
							style="margin-left: 20px;"
							ng-click="hisalarm_submit(paginationConf_history.currentPage,paginationConf_history.itemsPerPage)">
							<span class="glyphicon glyphicon-search"></span>
						</button>
						<button type="button" class="btn btn-primary">
							<span class="glyphicon glyphicon-share"></span>
						</button>
					</div>
					<table class="table table-bordered" style="margin-top: 20px;">
						<thead>
							<tr>
								<th class="col-md-1">编码</th>
								<th class="col-md-1">名称</th>
								<th class="col-md-3">信息</th>
								<th class="col-md-2">状态</th>
								<th class="col-md-2">值</th>
								<th class="col-md-3">时间</th>
							</tr>
						</thead>
						<tbody>
							<tr style="color: green" ng-repeat="x in alarmHisDatas">
								<td>{{x.alarm_cfg_id}}</td>
								<td>{{x.name}}</td>
								<td>{{x.text}}</td>
								<td>{{x.state==0?"确认":"未确认"}}</td>
								<td>{{x.value}}</td>
								<td>{{x.monitor_time|date:'yyyy-MM-dd HH:mm:ss'}}</td>
								<!-- <td><a href="#" title="详情"><span
							class="glyphicon glyphicon-info-sign"></span></a> <a href="#"
						title="确认"><span class="glyphicon glyphicon-ok"
							style="margin-left: 5px;"></span></a></td> -->
							</tr>
						</tbody>
					</table>
					<tm-pagination conf="paginationConf_history"></tm-pagination>
				</div>
			</div>


			<!--报警登记-->
			<div class="tab-pane" id="alarm-record">
				<div class="container-fluid">
					<table class="table table-bordered table-striped"
						style="margin-top: 20px;">
						<caption>
							<div class="row" style="margin: 10px 0;">
								<div class="col-md-2">
									<select id="dataGroupSelect" id="groupSelect"
										class=" form-control form-inline">
										<option>分组1</option>
										<option>分组2</option>
										<option>分组3</option>
									</select>
								</div>
								<button type="button" class="btn btn-primary"
									data-toggle="modal" data-target="#alarmGroupSetting"
									style="margin: 0 10px;">
									<span class="glyphicon glyphicon-cog"></span> 分组设置

								</button>
								<button type="button" class="btn btn-primary"
									data-toggle="modal" data-target="#addAlarmRecord"
									style="margin: 0 10px;">
									<span class="glyphicon glyphicon-pencil"></span> 报警登记
								</button>
							</div>
						</caption>
						<thead>
							<tr>
								<th class="col-md-1"><span data-action="label_encoding"></span></th>
								<th class="col-md-1"><span data-action="label_name"></span></th>
								<th class="col-md-3"><span data-action="label_trigger"></span></th>
								<th class="col-md-3"><span data-action="label_alarmcontent"></span></th>
								<th class="col-md-2"><span data-action="label_group"></span></th>
								<th class="col-md-2"><span data-action="label_operation"></span></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>1 <a href="#" title="设备已变更或移除"><span
										class="glyphicon glyphicon-exclamation-sign"
										style="float: right; color: #ff3a28;"></span></a>
								</td>
								<td>1</td>
								<td>ON</td>
								<td><span data-action="value_beginrecord"></span></td>
								<td>默认组</td>
								<td><a href="#" style="text-decoration: none"> <span
										class="glyphicon glyphicon-edit" data-toggle="modal"
										data-target="#editGroupName"
										style="color: #2889d0; margin: 10px;"></span>
								</a> <a href="#" style="text-decoration: none"> <span
										class="glyphicon glyphicon-file" data-toggle="modal"
										data-target="" style="color: #2889d0; margin: 10px;"></span>
								</a> <a href="#" style="text-decoration: none"> <span
										class="glyphicon glyphicon-trash" data-toggle="modal"
										data-target="#deleteGroup"
										style="color: #2889d0; margin: 10px;"></span>
								</a></td>
							</tr>
						</tbody>
					</table>
				</div>
				<!--分组设置对话框-->
				<div class="modal" id="alarmGroupSetting" tabindex="-1"
					data-backdrop="false">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">
									<span>&times;</span>
								</button>
								<h4 class="modal-title">分组设置</h4>
							</div>
							<div class="modal-body">
								<div class="container-fluid">
									<div class="row">
										<table class="table table-bordered table-hover">
											<caption>
												<button type="button" class="btn btn-primary"
													data-toggle="modal" data-target="#addGroup">
													<span class="glyphicon glyphicon-plus"></span> 添加
												</button>
											</caption>
											<thead>
												<tr>
													<th>名称</th>
													<th>备注</th>
													<th>操作</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>默认组</td>
													<td>这是默认分组</td>
													<td><a href="#" title="编辑" class="col-md-2"> <span
															class="glyphicon glyphicon-edit" data-toggle="modal"
															data-target="#editGroup"></span>
													</a> <a href="#" title="删除" class="col-md-2"> <span
															class="glyphicon glyphicon-trash" data-toggle="modal"
															data-target="#deleteGroup"></span>
													</a></td>
												</tr>
												<tr>
													<td>分组2</td>
													<td>这是分组2</td>
													<td><a href="#" title="编辑" class="col-md-2"> <span
															class="glyphicon glyphicon-edit" data-toggle="modal"
															data-target="#editGroup"></span>
													</a> <a href="#" title="删除" class="col-md-2"> <span
															class="glyphicon glyphicon-trash" data-toggle="modal"
															data-target="#deleteGroup"></span>
													</a></td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-info">确定</button>
								<button type="button" class="btn btn-default"
									data-dismiss="modal">取消</button>
							</div>
						</div>
					</div>
				</div>
				<!--确认删除提示对话框-->
				<div class="modal" id="deleteGroup" tabindex="-1"
					data-backdrop="false">
					<div class="modal-dialog modal-sm">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">
									<span>&times;</span>
								</button>
								<h4 class="modal-title">删除分组</h4>
							</div>
							<div class="modal-body">
								<span>确认删除此分组吗？</span>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-danger">确认</button>
								<button type="button" class="btn btn-default"
									data-dismiss="modal">取消</button>
							</div>
						</div>
					</div>
				</div>
				<!--编辑分组-->
				<div class="modal" tabindex="-1" id="editGroup"
					data-backdrop="false">
					<div class="modal-dialog modal-sm">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">
									<span>&times;</span>
								</button>
								<h4 class="modal-title">编辑分组</h4>
							</div>
							<div class="modal-body">
								<div class="container-fluid">
									<div class="form-group">
										<input id="groupName" type="text" class="form-control"
											placeholder="名称" style="padding-left: 5px;">
									</div>
									<div class="form-group">
										<input id="groupRemark" type="text" class="form-control"
											placeholder="备注" style="padding-left: 5px;">
									</div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-info">确认</button>
								<button type="button" class="btn btn-default"
									data-dismiss="modal">取消</button>
							</div>
						</div>
					</div>
				</div>
				<!--添加分组-->
				<div class="modal" tabindex="-1" id="addGroup" data-backdrop="false">
					<div class="modal-dialog modal-sm">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">
									<span>&times;</span>
								</button>
								<h4 class="modal-title">添加分组</h4>
							</div>
							<div class="modal-body">
								<div class="container-fluid">
									<div class="form-group">
										<input id="newGroupName" type="text" class="form-control"
											placeholder="名称" style="padding-left: 5px;">
									</div>
									<div class="form-group">
										<input id="newGroupRemark" type="text" class="form-control"
											placeholder="备注" style="padding-left: 5px;">
									</div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-info">确认</button>
								<button type="button" class="btn btn-default"
									data-dismiss="modal">取消</button>
							</div>
						</div>
					</div>
				</div>
				<!--添加报警记录-->
				<div class="modal" id="addAlarmRecord" tabindex="-1"
					data-backdrop="false">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">
									<span>&times;</span>
								</button>
								<h4 class="modal-title">新增报警记录</h4>
							</div>
							<div class="modal-body">
								<div class="container-fluid">
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<span class="col-md-3">名称</span><input type="text"
											class="col-md-9" style="height: 30px; padding-left: 5px;" />
									</div>
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<span class="col-md-3">分组</span> <select class="col-md-9"
											style="height: 30px;">
											<option>默认分组</option>
											<option>分组1</option>
											<option>分组2</option>
										</select>
									</div>
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<span class="col-md-3">连接设备</span> <select class="col-md-9"
											style="height: 30px;">
											<option>SIMUTOCOL LX1S</option>
											<option>SIMUTOCOL LX2N</option>
											<option>SIMUTOCOL LX3V</option>
										</select>
									</div>
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<span class="col-md-3">数据格式</span> <select id="datatype"
											class="col-md-9" style="height: 30px;"
											onchange="show_sub(this.options[this.options.selectedIndex].value)">
											<option value="162">16位二进制</option>
											<option value="168">16位八进制</option>
											<option value="1616">16位十六进制</option>
											<option value="16bcd">16位BCD码</option>
											<option value="16110">16位有符号十进制数</option>
											<option value="16010">16位无符号十进制数</option>
											<option value="322">32位二进制</option>
											<option value="328">32位八进制</option>
											<option value="3216">32位十六进制</option>
											<option value="32bcd">32位BCD码</option>
											<option value="32110">32位有符号十进制数</option>
											<option value="32010">32位无符号十进制数</option>
											<option value="32f">32位（单精度）浮点数</option>
											<option value="64d">64位（双精度）浮点数</option>
										</select>
									</div>
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<span class="col-md-3">地址类型</span> <select class="col-md-3"
											style="height: 30px;">
											<option>位地址</option>
											<option>字地址</option>
										</select> <span class="col-md-3">寄存器地址</span> <select class="col-md-3"
											style="height: 30px;">
											<option>BDW</option>
											<option>BWD</option>
											<option>BDW</option>
										</select>
									</div>
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<div id="data-range">
											<span class="col-md-3">数据范围</span> <input type="text"
												class="col-md-9" style="height: 30px; padding-left: 5px;"
												value="0" disabled />
										</div>
									</div>
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<span class="col-md-3">条件</span> <select class="col-md-3"
											style="height: 30px;">
											<option>等于</option>
											<option>不等于</option>
											<option>大于</option>
											<option>大于等于</option>
											<option>小于</option>
											<option>小于等于</option>
										</select> <input type="number" class="col-md-3"
											style="height: 30px; padding-left: 5px; margin: 0px 5px;" />
										<select id="selectWith" class="col-md-2" style="height: 30px;"
											ng-click="displaySecond()">
											<option value="none">无</option>
											<option value="or">或</option>
											<option value="and">与</option>
										</select>
									</div>
									<div id="secondCondition" class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0; display: none;">
										<span class="col-md-3"></span> <select class="col-md-3"
											style="height: 30px;">
											<option>等于</option>
											<option>不等于</option>
											<option>大于</option>
											<option>大于等于</option>
											<option>小于</option>
											<option>小于等于</option>
										</select> <input type="number" class="col-md-3"
											style="height: 30px; padding-left: 5px; margin: 0px 5px;" />
									</div>
									<div class="row col-md-11 col-md-offset-1"
										style="margin: 10px 0;">
										<span class="col-md-3">报警内容</span> <input type="text"
											class="col-md-9" style="height: 30px; padding-left: 5px;" />
									</div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-info">确认</button>
								<button type="button" class="btn btn-default"
									data-dismiss="modal">取消</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="tab-pane" id="alarm-global-setting">
				<div class="container-fluid" style="margin-top: 20px;">
					<div class="checkbox">
						<label> <input type="checkbox" value="" />暂停报警数据推送
						</label>
					</div>
				</div>
			</div>
		</div>




	</div>


	<script src="../lib/jquery/jquery-3.2.1.min.js" type="text/javascript"></script>
	<script src="../lib/bootstrap/3.3.7/js/bootstrap.min.js"
		type="text/javascript"></script>
	<script src="../lib/angular/angular.min.js" type="text/javascript"></script>
	<script src="../lib/bootstrap/select/js/bootstrap-select.js"></script>
	<script src="../lib/wecon-common.js" type="text/javascript"></script>
	<script src="../js/alarmlog.js" type="text/javascript"></script>
	<script
		src="../lib/bootstrap/datetimepicker/js/bootstrap-datetimepicker.js"></script>

	<script src="../lib/pagination.js" type="text/javascript"></script>
</body>
</html>